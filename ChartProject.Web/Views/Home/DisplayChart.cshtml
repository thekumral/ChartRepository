@using Newtonsoft.Json
@{
    ViewBag.Title = "Grafik Gösterimi";
    var chartType = ViewBag.ChartType;
    var chartData = ViewBag.ChartData as IEnumerable<ChartData>;
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>@ViewBag.Title</h2>
    <canvas id="chart"></canvas>
    <script>
        var ctx = document.getElementById('chart').getContext('2d');
        var chartType = '@chartType';
        var chartData = @Html.Raw(JsonConvert.SerializeObject(chartData));

        var data = {
            labels: chartData.map(item => item.Label),
            datasets: [{
                label: 'Sales Data',
                data: chartData.map(item => item.Value),
                backgroundColor: chartType === 'bar' ? 'rgba(75, 192, 192, 0.2)' : undefined,
                borderColor: chartType === 'bar' ? 'rgba(75, 192, 192, 1)' : undefined,
                borderWidth: chartType === 'bar' ? 1 : undefined,
                fill: chartType !== 'line'
            }]
        };

        new Chart(ctx, {
            type: chartType,
            data: data,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: true
                    }
                }
            }
        });
    </script>
</body>
</html>
